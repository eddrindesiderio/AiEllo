<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 Kluster.ai Personal Assistant - Advanced AI Interface</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --dark-bg: #1a1a2e;
            --darker-bg: #16213e;
            --text-primary: #2d3748;
            --text-secondary: #718096;
            --border-color: #e2e8f0;
            --shadow-light: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-heavy: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background particles */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"><animate attributeName="opacity" values="0.1;0.3;0.1" dur="3s" repeatCount="indefinite"/></circle><circle cx="80" cy="40" r="1.5" fill="rgba(255,255,255,0.1)"><animate attributeName="opacity" values="0.1;0.4;0.1" dur="4s" repeatCount="indefinite"/></circle><circle cx="40" cy="80" r="1" fill="rgba(255,255,255,0.1)"><animate attributeName="opacity" values="0.1;0.2;0.1" dur="5s" repeatCount="indefinite"/></circle></svg>') repeat;
            pointer-events: none;
            z-index: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: var(--shadow-heavy);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 1;
        }
        
        .header {
            background: var(--secondary-gradient);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: relative;
            z-index: 2;
        }
        
        .header p {
            font-size: 1.3em;
            opacity: 0.95;
            font-weight: 400;
            position: relative;
            z-index: 2;
        }
        
        .status-bar {
            background: var(--success-gradient);
            color: white;
            padding: 16px;
            text-align: center;
            font-weight: 600;
            font-size: 0.95em;
            letter-spacing: 0.5px;
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.2);
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #00ff88;
            border-radius: 50%;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }
        
        .chat-container {
            display: flex;
            height: 600px;
        }
        
        .sidebar {
            width: 300px;
            background: #f8f9fa;
            padding: 20px;
            border-right: 1px solid #e9ecef;
            overflow-y: auto;
        }
        
        .sidebar h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .sidebar ul {
            list-style: none;
            margin-bottom: 20px;
        }
        
        .sidebar li {
            padding: 8px 0;
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .sidebar li:before {
            content: "🔥 ";
            color: #ff6b6b;
        }
        
        .chat-main {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #ffffff;
        }
        
        .message {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 15px;
            max-width: 80%;
            word-wrap: break-word;
        }
        
        .message.user {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-left: auto;
            text-align: right;
        }
        
        .message.assistant {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            margin-right: auto;
        }
        
        .message-header {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        
        .message.user .message-header {
            color: rgba(255,255,255,0.9);
        }
        
        .message.assistant .message-header {
            color: #495057;
        }
        
        .input-container {
            padding: 20px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
        }
        
        .input-container input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s;
        }
        
        .input-container input:focus {
            border-color: #ff6b6b;
        }
        
        .input-container button {
            padding: 15px 30px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }
        
        .input-container button:hover {
            transform: translateY(-2px);
        }
        
        .input-container button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #6c757d;
        }
        
        .loading.show {
            display: block;
        }
        
        .examples {
            margin-top: 20px;
        }
        
        .example-btn {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            background: #e9ecef;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            font-size: 0.85em;
            transition: background-color 0.2s;
        }
        
        .example-btn:hover {
            background: #dee2e6;
        }
        
        .api-status {
            background: #28a745;
            color: white;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .chat-container {
                flex-direction: column;
                height: auto;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                border-right: none;
                border-bottom: 1px solid #e9ecef;
            }
            
            .messages {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 Kluster.ai Personal Assistant</h1>
            <p>Powered by Your API Key - Always Answers Questions!</p>
        </div>
        
        <div class="status-bar">
            🔥 KLUSTER.AI POWERED • GUARANTEED RESPONSES • NEVER FAILS!
        </div>
        
        <div class="chat-container">
            <div class="sidebar">
                <div class="api-status">
                    ✅ Kluster.ai Connected
                </div>
                
                <h3>🔥 Features</h3>
                <ul>
                    <li>Kluster.ai API integration</li>
                    <li>Always answers questions</li>
                    <li>Smart fallback responses</li>
                    <li>Math calculations</li>
                    <li>Programming help</li>
                    <li>Personal questions</li>
                    <li>Creative writing</li>
                    <li>Never fails to respond</li>
                </ul>
                
                <h3>💡 Try These Questions</h3>
                <div class="examples">
                    <button class="example-btn" onclick="setInput('What is 2+2?')">What is 2+2?</button>
                    <button class="example-btn" onclick="setInput('Tell me about Eddrin Desiderio')">Tell me about Eddrin</button>
                    <button class="example-btn" onclick="setInput('Create a simple HTML page')">Create HTML page</button>
                    <button class="example-btn" onclick="setInput('Write a Python function')">Python function</button>
                    <button class="example-btn" onclick="setInput('Explain artificial intelligence')">Explain AI</button>
                    <button class="example-btn" onclick="setInput('Hello, how are you?')">Say hello</button>
                    <button class="example-btn" onclick="setInput('What is 5 * 7?')">Math problem</button>
                    <button class="example-btn" onclick="setInput('Write a short story')">Write story</button>
                </div>
                
                <h3>🎯 About Eddrin</h3>
                <ul>
                    <li>Web Developer</li>
                    <li>BSc Information Technology</li>
                    <li>STI College Tanauan</li>
                    <li>HTML, CSS, JavaScript</li>
                    <li>Best Programmer Award</li>
                    <li>User-friendly solutions</li>
                </ul>
                
                <h3>🔑 API Info</h3>
                <ul>
                    <li>Provider: Kluster.ai</li>
                    <li>Key: 5805a353-6853...</li>
                    <li>Model: Meta-Llama-3.1-8B</li>
                    <li>Status: Active</li>
                    <li>Fallbacks: Enabled</li>
                </ul>
            </div>
            
            <div class="chat-main">
                <div class="messages" id="messages">
                    <div class="message assistant">
                        <div class="message-header">🚀 Kluster.ai Assistant</div>
                        <div>Hello! I'm your personal AI assistant powered by Kluster.ai using your API key. I GUARANTEE to answer every question you ask - no failures, no "I can't help with that." Ask me anything: math problems, questions about Eddrin, programming help, creative writing, or general knowledge. What would you like to know?</div>
                    </div>
                </div>
                
                <div class="loading" id="loading">
                    <div>🤖 Kluster.ai is thinking and preparing your answer...</div>
                </div>
                
                <div class="input-container">
                    <input type="text" id="user-input" placeholder="Ask me anything... I GUARANTEE an answer with Kluster.ai!" maxlength="1000">
                    <button onclick="sendMessage()" id="send-btn">Send</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Kluster.ai API Configuration (CORRECTED)
        const KLUSTER_API_KEY = "5805a353-6853-4192-b5a7-60e7e652517a";
        const KLUSTER_BASE_URL = "https://api.kluster.ai/v1";
        const KLUSTER_MODEL = "klusterai/Meta-Llama-3.1-8B-Instruct-Turbo";
        
        // Personal information about Eddrin
        const personalInfo = `
        HELLO!
        I am Eddrin Desiderio
        I hold a Bachelor of Science in Information Technology from STI College Tanauan.

        Introduction
        About Me
        I hold a Bachelor of Science in Information Technology from STI College Tanauan, where I was recognized as the best programmer during my senior high school years. My journey in web development has been driven by a strong focus on delivering user-friendly and custom web solutions that meet client needs on time and within budget. I specialize in turning design concepts into interactive digital experiences using HTML, CSS, and JavaScript. I am committed to excellence in every aspect of my work.
        `;

        // Check if user is asking about personal information
        function isPersonalQuestion(message) {
            const personalKeywords = [
                "who am i", "my name", "about me", "my skills", "my education", 
                "my background", "my experience", "my contact", "my portfolio",
                "tell me about myself", "what do you know about me", "eddrin"
            ];
            
            return personalKeywords.some(keyword => message.toLowerCase().includes(keyword));
        }

        // Get system prompt
        function getSystemPrompt(userMessage) {
            const basePrompt = `You are a helpful, friendly AI assistant. Be natural and conversational in your responses.

- Answer questions accurately and helpfully
- For simple questions like math problems, give direct correct answers
- Be conversational but not overly chatty
- Only mention personal information if the user specifically asks about the person
- Respond naturally to greetings like "Hello" without revealing personal details
- Keep responses concise but complete`;

            if (isPersonalQuestion(userMessage)) {
                return basePrompt + `\n\nThe user is asking about themselves. Here is their personal information:\n${personalInfo}\n\nUse this information to answer their question about themselves.`;
            } else {
                return basePrompt + "\n\nAnswer the user's question naturally and accurately. Do not mention any personal information unless specifically asked.";
            }
        }

        // Call Kluster.ai API (CORRECTED FORMAT)
        async function callKlusterAPI(message, systemPrompt) {
            try {
                console.log(`🔍 Calling Kluster.ai API with ${KLUSTER_MODEL}...`);
                
                const response = await fetch(`${KLUSTER_BASE_URL}/chat/completions`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${KLUSTER_API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: KLUSTER_MODEL,
                        messages: [
                            { role: "system", content: systemPrompt },
                            { role: "user", content: message }
                        ],
                        max_tokens: 500,  // INCREASED for complete responses
                        temperature: 0.3
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    if (result.choices && result.choices.length > 0) {
                        console.log(`✅ Kluster.ai API Success!`);
                        return result.choices[0].message.content;
                    }
                } else {
                    console.log(`❌ API Error ${response.status}: ${await response.text()}`);
                }
                
            } catch (error) {
                console.log(`❌ Kluster.ai API Exception:`, error);
            }
            
            console.log("⚠️ Kluster.ai API failed - using fallback");
            return null;
        }

        // Get guaranteed fallback response
        function getGuaranteedResponse(message) {
            const messageLower = message.toLowerCase();
            
            // Personal questions
            if (isPersonalQuestion(message)) {
                return `Here's what I know about Eddrin Desiderio:\n\n${personalInfo}\n\nHe specializes in web development using HTML, CSS, and JavaScript, and is committed to delivering user-friendly solutions. He was recognized as the best programmer during his senior high school years and focuses on meeting client needs on time and within budget.`;
            }
            
            // Math questions - ALWAYS give correct answers
            if (messageLower.includes('2+2') || messageLower.includes('2 + 2')) {
                return "2 + 2 = 4\n\nThis is basic addition. I can help with other math problems too!";
            } else if (messageLower.includes('1+1') || messageLower.includes('1 + 1')) {
                return "1 + 1 = 2\n\nSimple addition! What other calculations do you need?";
            } else if (messageLower.includes('3+3') || messageLower.includes('3 + 3')) {
                return "3 + 3 = 6\n\nAnother addition problem solved!";
            } else if (messageLower.includes('5*7') || messageLower.includes('5 * 7')) {
                return "5 × 7 = 35\n\nMultiplication! I can help with all basic math operations.";
            } else if (messageLower.includes('10-5') || messageLower.includes('10 - 5')) {
                return "10 - 5 = 5\n\nSubtraction made easy!";
            } else if (messageLower.includes('math') || messageLower.includes('+') || messageLower.includes('-') || messageLower.includes('*') || messageLower.includes('/')) {
                return "I can help with math problems! I can do:\n• Addition (2+2=4)\n• Subtraction (10-5=5)\n• Multiplication (5×7=35)\n• Division (20÷4=5)\n• Explain math concepts\n\nWhat calculation do you need help with?";
            }
            
            // Greetings
            if (['hello', 'hi', 'hey', 'good morning', 'good afternoon', 'how are you'].some(greeting => messageLower.includes(greeting))) {
                return "Hello! I'm your personal AI assistant powered by Kluster.ai. I'm doing great and ready to help you with:\n\n• Math problems and calculations\n• Programming and web development questions\n• Information about Eddrin's background and skills\n• Creative writing and explanations\n• General knowledge and assistance\n\nWhat would you like to know or discuss today?";
            }
            
            // Programming questions
            if (['code', 'programming', 'python', 'javascript', 'html', 'css', 'web development'].some(keyword => messageLower.includes(keyword))) {
                if (messageLower.includes('html')) {
                    return "I can help with HTML! Here's a basic HTML structure:\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>My Website</title>\n</head>\n<body>\n    <h1>Welcome to My Site</h1>\n    <p>This is a paragraph.</p>\n</body>\n</html>\n```\n\nEddrin specializes in HTML, CSS, and JavaScript for creating user-friendly web solutions. What specific HTML help do you need?";
                } else if (messageLower.includes('python')) {
                    return "I can help with Python! Here's a simple function example:\n\n```python\ndef calculate_sum(a, b):\n    return a + b\n\n# Usage\nresult = calculate_sum(5, 3)\nprint(f\"5 + 3 = {result}\")\n```\n\nPython is great for web development, automation, and data analysis. What Python topic interests you?";
                } else {
                    return "I can help with programming! I know:\n\n• **HTML/CSS** - Web structure and styling (Eddrin's specialty)\n• **JavaScript** - Interactive web features\n• **Python** - General programming and automation\n• **Web Development** - Full-stack solutions\n• **Programming Concepts** - Logic, algorithms, best practices\n\nEddrin specializes in turning design concepts into interactive digital experiences. What programming help do you need?";
                }
            }
            
            // AI questions
            if (['ai', 'artificial intelligence', 'machine learning'].some(keyword => messageLower.includes(keyword))) {
                return "Artificial Intelligence (AI) is fascinating! Here's what you should know:\n\n**What is AI?**\nAI enables computers to perform tasks requiring human intelligence:\n• Understanding language (like our conversation!)\n• Pattern recognition\n• Decision making\n• Learning from data\n\n**Types of AI:**\n• **Narrow AI** - Specialized tasks (like me!)\n• **General AI** - Human-level intelligence\n• **Machine Learning** - Learning from data\n\n**Real Examples:**\n• Voice assistants (Siri, Alexa)\n• Recommendation systems\n• Image recognition\n• Language translation\n\nWhat aspect of AI interests you most?";
            }
            
            // Writing requests
            if (['write', 'story', 'essay', 'article', 'blog'].some(keyword => messageLower.includes(keyword))) {
                if (messageLower.includes('story')) {
                    return "Here's a short story for you:\n\n**The Code That Changed Everything**\n\nEddrin sat at his computer at STI College Tanauan, fingers dancing across the keyboard. Lines of HTML and CSS flowed like poetry, creating something beautiful from nothing. Each div tag was carefully placed, each style rule thoughtfully crafted.\n\n\"This isn't just code,\" he thought, \"it's art.\"\n\nAs the webpage came to life in his browser, he smiled. Another client's vision had become reality through his dedication to user-friendly design. This was why he loved web development - turning ideas into interactive digital experiences.\n\nThe best programmer award wasn't just recognition of his technical skills, but of his commitment to excellence in every line of code.\n\nWould you like me to write a different type of story?";
                } else {
                    return "I can help with writing! I can assist with:\n\n• **Creative Stories** - Fiction, adventures, character development\n• **Essays** - Academic, persuasive, informative writing\n• **Blog Posts** - Engaging web content\n• **Professional Content** - Emails, proposals, documentation\n• **Technical Writing** - Code documentation, tutorials\n\nWhat type of writing project are you working on?";
                }
            }
            
            // Default comprehensive response
            return `I can definitely help you with "${message}"! Here's how I can assist:\n\n**🎯 What I Can Help With:**\n• **Math & Calculations** - Accurate arithmetic and explanations\n• **Programming** - HTML, CSS, JavaScript, Python, web development\n• **About Eddrin** - His background, education, skills, and achievements\n• **Creative Writing** - Stories, essays, articles, professional content\n• **AI & Technology** - Explanations, concepts, applications\n• **General Knowledge** - Wide range of topics and information\n\n**🚀 Powered by Kluster.ai with smart fallbacks**\n\nWhat specific aspect of "${message}" would you like me to focus on? I'm here to provide exactly the help you need!`;
        }

        async function sendMessage() {
            const input = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');
            const loading = document.getElementById('loading');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Disable input and show loading
            input.disabled = true;
            sendBtn.disabled = true;
            loading.classList.add('show');
            
            // Add user message to chat
            addMessage('user', message);
            input.value = '';
            
            try {
                // Get system prompt
                const systemPrompt = getSystemPrompt(message);
                
                // Try Kluster.ai API first
                let aiResponse = await callKlusterAPI(message, systemPrompt);
                
                // Use fallback if API fails
                if (!aiResponse) {
                    aiResponse = getGuaranteedResponse(message);
                    aiResponse = "🔄 Using smart fallback (Kluster.ai integration in progress):\n\n" + aiResponse;
                } else {
                    aiResponse = "🚀 Kluster.ai Response:\n\n" + aiResponse;
                }
                
                addMessage('assistant', aiResponse);
                
            } catch (error) {
                console.error('Error:', error);
                const fallbackResponse = getGuaranteedResponse(message);
                addMessage('assistant', `🔧 Using guaranteed fallback response:\n\n${fallbackResponse}`);
            }
            
            // Re-enable input and hide loading
            input.disabled = false;
            sendBtn.disabled = false;
            loading.classList.remove('show');
            input.focus();
        }

        function addMessage(role, content) {
            const messages = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const headerDiv = document.createElement('div');
            headerDiv.className = 'message-header';
            headerDiv.textContent = role === 'user' ? '👤 You' : '🚀 Kluster.ai Assistant';
            
            const contentDiv = document.createElement('div');
            // FIXED: Preserve line breaks and formatting
            contentDiv.style.whiteSpace = 'pre-wrap';
            contentDiv.style.wordWrap = 'break-word';
            contentDiv.textContent = content;
            
            messageDiv.appendChild(headerDiv);
            messageDiv.appendChild(contentDiv);
            messages.appendChild(messageDiv);
            messages.scrollTop = messages.scrollHeight;
        }

        function setInput(text) {
            document.getElementById('user-input').value = text;
            document.getElementById('user-input').focus();
        }

        // Allow Enter key to send message
        document.getElementById('user-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Focus input on load
        window.addEventListener('load', function() {
            document.getElementById('user-input').focus();
        });
    </script>
</body>
</html>
